(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[297],{82669:function(e,s,a){Promise.resolve().then(a.bind(a,58136))},58136:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return M}});var r=a(57437),t=a(2265),l=a(87138),i=a(65118),n=a(37164),d=a(11240),c=a(92513),o=a(45447),x=a(89832),m=a(4086),g=a(4436),h=a(51077),u=a(24241),j=a(71976),p=a(36563);function y(){return(0,r.jsxs)("div",{className:"glass-card p-6 rounded-xl animate-pulse bg-white/60 border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsx)("div",{className:"h-6 w-28 rounded-full bg-gray-200"}),(0,r.jsx)("div",{className:"h-4 w-16 bg-gray-200 rounded"})]}),(0,r.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,r.jsx)("div",{className:"h-6 w-40 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-4 w-56 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-4 w-48 bg-gray-200 rounded"})]}),(0,r.jsx)("div",{className:"mb-4 p-3 bg-gray-100 rounded-lg",children:(0,r.jsx)("div",{className:"h-4 w-52 bg-gray-200 rounded"})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("div",{className:"h-9 flex-1 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-9 flex-1 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-9 w-10 bg-gray-200 rounded"})]})]})}function b(e){var s,a,t,i;let{lead:n}=e,d=(t=n.score)>=9?"#D4AF37":t>=7?"#F59E0B":t>=5?"#3B82F6":t>=3?"#6B7280":"#9CA3AF";return(0,r.jsxs)("div",{className:"glass-card p-6 rounded-xl hover:shadow-xl transition-all duration-300 border-l-4 bg-white border-gray-200",style:{borderLeftColor:d},children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"px-3 py-1 rounded-full text-sm font-bold text-white",style:{backgroundColor:d},children:[n.score.toFixed(1)," ",(i=n.score)>=9?"\uD83D\uDD25 Hot":i>=7?"⚡ Warm":i>=5?"\uD83D\uDCC8 Developing":i>=3?"❄️ Cold":"⏸️ Low"]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,p.Q)(new Date(n.created_at))," ago"]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:n.name}),(0,r.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),(0,r.jsx)("a",{href:"tel:".concat(n.phone),className:"hover:text-primary-600",children:n.phone})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4"}),(0,r.jsx)("a",{href:"mailto:".concat(n.email),className:"hover:text-primary-600 truncate",children:n.email})]})]})]}),(0,r.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"Interested in:"}),(0,r.jsx)("div",{className:"font-semibold text-gray-900 text-sm truncate",children:(null===(s=n.property)||void 0===s?void 0:s.title)||"-"}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:(null===(a=n.property)||void 0===a?void 0:a.location)||""})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 text-gray-600",children:[(0,r.jsx)(g.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"capitalize",children:n.source})]}),"number"==typeof n.budget&&(0,r.jsxs)("div",{className:"flex items-center gap-1 text-gray-600",children:[(0,r.jsx)(h.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:["₹",function(e){try{return new Intl.NumberFormat("en-IN",{maximumFractionDigits:0}).format(e)}catch(s){return String(e)}}(n.budget)]})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("a",{href:"tel:".concat(n.phone),className:"flex-1 py-2 px-3 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),"Call"]}),(0,r.jsxs)("button",{className:"flex-1 py-2 px-3 bg-emerald-600 hover:bg-emerald-700 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4"}),"Schedule"]}),(0,r.jsx)(l.default,{href:"/builder/leads/".concat(n.id),className:"py-2 px-4 border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors flex items-center justify-center",children:(0,r.jsx)(j.Z,{className:"w-4 h-4 text-gray-600"})})]})]})}var v=a(33514),N=a(54175);function f(e){let{leads:s=[]}=e,a=(0,t.useMemo)(()=>s,[s]),l=(0,t.useMemo)(()=>[{header:"Name",accessorKey:"name"},{header:"Contact",cell:e=>{let{row:s}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm",children:s.original.email}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:s.original.phone})]})}},{header:"Property",cell:e=>{var s,a;let{row:t}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:(null===(s=t.original.property)||void 0===s?void 0:s.title)||"-"}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:(null===(a=t.original.property)||void 0===a?void 0:a.location)||""})]})}},{header:"Score",accessorKey:"score"},{header:"Source",accessorKey:"source"},{header:"Status",accessorKey:"status"}],[]),i=(0,v.b7)({data:a,columns:l,getCoreRowModel:(0,N.sC)()});return(0,r.jsx)("div",{className:"overflow-auto rounded-xl border border-gray-200 bg-white",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{className:"bg-gray-50 text-gray-700",children:i.getHeaderGroups().map(e=>(0,r.jsx)("tr",{children:e.headers.map(e=>(0,r.jsx)("th",{className:"px-3 py-2 text-left font-semibold",children:e.isPlaceholder?null:(0,v.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,r.jsxs)("tbody",{children:[i.getRowModel().rows.map(e=>(0,r.jsx)("tr",{className:"border-t border-gray-100",children:e.getVisibleCells().map(e=>{var s;return(0,r.jsx)("td",{className:"px-3 py-2",children:(0,v.ie)(null!==(s=e.column.columnDef.cell)&&void 0!==s?s:e.column.columnDef.header,e.getContext())},e.id)})},e.id)),0===a.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:l.length,children:"No leads found"})})]})]})})}async function w(e){let s=new URLSearchParams({status:e.status,scoreMin:String(e.scoreMin),scoreMax:String(e.scoreMax),source:e.source,dateRange:e.dateRange}),a=await fetch("/api/builder/leads?".concat(s.toString()),{next:{revalidate:0}});if(!a.ok)throw Error("Failed to load leads");return(await a.json()).items}function C(e){let{view:s,onChange:a}=e;return(0,r.jsxs)("div",{className:"inline-flex rounded-lg border border-gray-300 bg-white overflow-hidden",children:[(0,r.jsx)("button",{onClick:()=>a("grid"),className:"px-3 py-2 text-sm ".concat("grid"===s?"bg-gray-100 font-semibold":""),children:"Grid"}),(0,r.jsx)("button",{onClick:()=>a("table"),className:"px-3 py-2 text-sm ".concat("table"===s?"bg-gray-100 font-semibold":""),children:"Table"})]})}function M(){let[e,s]=(0,t.useState)({status:"all",scoreMin:0,scoreMax:10,source:"all",dateRange:"30days"}),[a,x]=(0,t.useState)("grid"),{data:m,isLoading:g}=(0,i.a)({queryKey:["leads",e],queryFn:()=>w(e)}),h=(null==m?void 0:m.length)||0;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Leads"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage and track all inquiries"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(C,{view:a,onChange:x}),(0,r.jsxs)("button",{className:"px-3 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg text-sm inline-flex items-center gap-2",children:[(0,r.jsx)(n.Z,{className:"w-5 h-5"}),"Export"]})]})]}),(0,r.jsx)("div",{className:"glass-card p-4 rounded-xl bg-white border border-gray-200",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Status"}),(0,r.jsxs)(o.Ph,{value:e.status,onChange:a=>s({...e,status:a.target.value}),children:[(0,r.jsx)("option",{value:"all",children:"All Status"}),(0,r.jsx)("option",{value:"new",children:"New"}),(0,r.jsx)("option",{value:"contacted",children:"Contacted"}),(0,r.jsx)("option",{value:"site_visit",children:"Site Visit"}),(0,r.jsx)("option",{value:"negotiation",children:"Negotiation"}),(0,r.jsx)("option",{value:"closed_won",children:"Closed Won"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Lead Score"}),(0,r.jsx)(o.iR,{value:[e.scoreMin,e.scoreMax],onValueChange:a=>{let[r,t]=a;return s({...e,scoreMin:r,scoreMax:t})},min:0,max:10,step:.5,className:"w-full"}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,r.jsx)("span",{children:e.scoreMin}),(0,r.jsx)("span",{children:e.scoreMax})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Source"}),(0,r.jsxs)(o.Ph,{value:e.source,onChange:a=>s({...e,source:a.target.value}),children:[(0,r.jsx)("option",{value:"all",children:"All Sources"}),(0,r.jsx)("option",{value:"organic",children:"Organic Search"}),(0,r.jsx)("option",{value:"google_ads",children:"Google Ads"}),(0,r.jsx)("option",{value:"referral",children:"Referral"}),(0,r.jsx)("option",{value:"direct",children:"Direct"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date Range"}),(0,r.jsxs)(o.Ph,{value:e.dateRange,onChange:a=>s({...e,dateRange:a.target.value}),children:[(0,r.jsx)("option",{value:"7days",children:"Last 7 Days"}),(0,r.jsx)("option",{value:"30days",children:"Last 30 Days"}),(0,r.jsx)("option",{value:"90days",children:"Last 90 Days"}),(0,r.jsx)("option",{value:"all",children:"All Time"})]})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsx)("button",{onClick:()=>s({status:"all",scoreMin:0,scoreMax:10,source:"all",dateRange:"30days"}),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium w-full",children:"Clear Filters"})})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:h})," leads"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{className:"px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Mark as Contacted"}),(0,r.jsx)("button",{className:"px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Assign to Team"})]})]}),g?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(e=>(0,r.jsx)(y,{},e))}):"grid"===a?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:null==m?void 0:m.map(e=>(0,r.jsx)(b,{lead:e},e.id))}):(0,r.jsx)(f,{leads:m}),!g&&0===h&&(0,r.jsxs)("div",{className:"glass-card p-12 rounded-2xl text-center bg-white border border-gray-200",children:[(0,r.jsx)(d.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No leads found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Try adjusting your filters or list more properties to attract leads"}),(0,r.jsxs)(l.default,{href:"/builder/properties/add",className:"inline-flex items-center gap-2 px-4 py-2 bg-gold-500 hover:bg-gold-600 text-primary-950 rounded-lg font-semibold",children:[(0,r.jsx)(c.Z,{className:"w-5 h-5"}),"List Your First Property"]})]})]})}}},function(e){e.O(0,[1048,1336,5118,8869,1792,8502,5447,2971,3526,1744],function(){return e(e.s=82669)}),_N_E=e.O()}]);