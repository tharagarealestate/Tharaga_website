(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8699],{70129:function(e,t,l){Promise.resolve().then(l.bind(l,7626))},7626:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return s}});var n=l(57437),i=l(2265);function s(){let[e,t]=i.useState(null),[l,s]=i.useState(null),[o,r]=i.useState();async function c(e,t){try{let l=await fetch("/api/env-intel?lat=".concat(e,"&lng=").concat(t)),n=await l.json();s(n)}catch(e){r((null==e?void 0:e.message)||"Failed")}}return(0,n.jsxs)("main",{className:"mx-auto max-w-3xl px-6 py-8",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-plum mb-4",children:"Environment intelligence"}),(0,n.jsxs)("div",{className:"rounded-xl border border-plum/10 bg-brandWhite p-4 space-y-4",children:[(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{className:"rounded-lg border px-3 py-2",onClick:function(){if(!navigator.geolocation){r("Geolocation not supported");return}navigator.geolocation.getCurrentPosition(e=>{let l=e.coords.latitude,n=e.coords.longitude;t({lat:l,lng:n}),c(l,n)},()=>r("Location denied"))},children:"Use my location"}),e&&(0,n.jsxs)("div",{className:"text-sm text-plum/70",children:["lat ",e.lat.toFixed(4),", lng ",e.lng.toFixed(4)]})]}),l&&(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,n.jsx)(a,{label:"Air quality (AQI)",value:String(l.aqi)}),(0,n.jsx)(a,{label:"Flood risk",value:(100*l.floodRisk).toFixed(0)+"%"}),(0,n.jsx)(a,{label:"Climate score",value:String(Math.round(l.climateScore))+"/100"})]}),o&&(0,n.jsx)("div",{className:"text-sm text-plum/80",children:o})]})]})}function a(e){let{label:t,value:l}=e;return(0,n.jsxs)("div",{className:"rounded-lg border border-plum/10 p-3",children:[(0,n.jsx)("div",{className:"text-xs text-plum/60",children:t}),(0,n.jsx)("div",{className:"font-semibold",children:l})]})}}},function(e){e.O(0,[2971,3526,1744],function(){return e(e.s=70129)}),_N_E=e.O()}]);