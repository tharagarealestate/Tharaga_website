var oe=Object.defineProperty;var ge=Object.getOwnPropertyDescriptor;var me=Object.getOwnPropertyNames;var fe=Object.prototype.hasOwnProperty;var xe=(m,b)=>()=>(m&&(b=m(m=0)),b);var ee=(m,b,W,v)=>{if(b&&typeof b=="object"||typeof b=="function")for(let l of me(b))!fe.call(m,l)&&l!==W&&oe(m,l,{get:()=>b[l],enumerable:!(v=ge(b,l))||v.enumerable});return m},te=(m,b,W)=>(ee(m,b,"default"),W&&ee(W,b,"default"));var ke=m=>ee(oe({},"__esModule",{value:!0}),m);var Y={};import*as Ut from"async_hooks";var ie=xe(()=>{te(Y,Ut)});import{__getNamedExports as ye}from"../../../../../__next-on-pages-dist__/webpack/47fe815531eb8e5317415e1af8098383.js";import{__getNamedExports as $e}from"../../../../../__next-on-pages-dist__/webpack/afa6f7b95211b974b8d86be169fb0c50.js";import{__getNamedExports as be}from"../../../../../__next-on-pages-dist__/webpack/0d466af974cbd04cfddc679609bb848b.js";import{__getNamedExports as ve}from"../../../../../__next-on-pages-dist__/webpack/4c3cfe6622a9ad7a2fe576973d7361ab.js";import{__getNamedExports as Pe}from"../../../../../__next-on-pages-dist__/webpack/99321.js";import{__getNamedExports as Ee}from"../../../../../__next-on-pages-dist__/webpack/fa5c3540ea983cf3ad97b8d1e4d44265.js";import{__getNamedExports as we}from"../../../../../__next-on-pages-dist__/webpack/c06616c49173394024f3b2ba6821ebbd.js";import{__getNamedExports as Oe}from"../../../../../__next-on-pages-dist__/manifest/27d10e462fba646daaa29468a0656e12.js";var k=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/admin/metrics/top"),G=ye(k,k,k),Ne=G.__chunk_39868,Re=G.__chunk_54865,Se=G.__chunk_40347,Ae=G.__chunk_11496,Te=G.__chunk_95706,je=G.__chunk_89384,Me=G.__chunk_9578,z=$e(k,k,k),Ke=z.__chunk_26195,Ie=z.__chunk_2067,Ce=z.__chunk_649,De=z.__chunk_4704,Fe=z.__chunk_55612,ue=be(k,k,k),Le=ue.__chunk_75492,Be=ue.__chunk_53059,$=ve(k,k,k),Ue=$.__chunk_35524,qe=$.__chunk_38536,Ge=$.__chunk_66765,He=$.__chunk_59814,We=$.__chunk_89859,Xe=$.__chunk_99307,Ye=$.__chunk_90074,ze=$.__chunk_4123,Je=$.__chunk_63412,Ve=$.__chunk_68978,Qe=$.__chunk_86617,Ze=$.__chunk_85767,et=$.__chunk_88260,tt=$.__chunk_17949,rt=$.__chunk_15514,st=$.__chunk_25257,at=$.__chunk_48690,nt=$.__chunk_90552,ot=$.__chunk_17649,it=$.__chunk_92501,ut=$.__chunk_46443,ct=$.__chunk_41616,ht=$.__chunk_62034,lt=Pe(k,k,k),_t=lt.__chunk_99321,J=Ee(k,k,k),dt=J.__chunk_1812,pt=J.__chunk_1673,gt=J.__chunk_65376,mt=J.__chunk_12328,P=we(k,k,k),ft=P.__chunk_16254,xt=P.__chunk_94051,kt=P.__chunk_79614,yt=P.__chunk_47398,$t=P.__chunk_55027,bt=P.__chunk_22738,vt=P.__chunk_2113,Pt=P.__chunk_2860,Et=P.__chunk_8427,wt=P.__chunk_58997,Ot=P.__chunk_28024,Nt=P.__chunk_52403,Rt=P.__chunk_56087,St=P.__chunk_26265,At=P.__chunk_68610,Tt=P.__chunk_7959,jt=P.__chunk_84303,Mt=P.__chunk_3326,Kt=P.__chunk_50391,It=P.__chunk_28789,Ct=P.__chunk_93131,re=Oe(k,k,k),Dt=re.__NEXT_FONT_MANIFEST,Ft=re.__REACT_LOADABLE_MANIFEST,Lt=re.__BUILD_MANIFEST,Vt=((m,b,W)=>(b._ENTRIES={},m.__BUILD_MANIFEST=Lt,m.__REACT_LOADABLE_MANIFEST=Ft,m.__NEXT_FONT_MANIFEST=Dt,m.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",m.__PRERENDER_MANIFEST='{"version":4,"routes":{},"dynamicRoutes":{},"notFoundRoutes":[],"preview":{"previewModeId":"process.env.__NEXT_PREVIEW_MODE_ID","previewModeSigningKey":"process.env.__NEXT_PREVIEW_MODE_SIGNING_KEY","previewModeEncryptionKey":"process.env.__NEXT_PREVIEW_MODE_ENCRYPTION_KEY"}}',(()=>{"use strict";var v={},l={};function o(s){var c=l[s];if(c!==void 0)return c.exports;var i=l[s]={id:s,loaded:!1,exports:{}},h=!0;try{v[s].call(i.exports,i,i.exports,o),h=!1}finally{h&&delete l[s]}return i.loaded=!0,i.exports}o.m=v,o.amdO={},(()=>{var s=[];o.O=(c,i,h,t)=>{if(i){t=t||0;for(var e=s.length;e>0&&s[e-1][2]>t;e--)s[e]=s[e-1];s[e]=[i,h,t];return}for(var r=1/0,e=0;e<s.length;e++){for(var[i,h,t]=s[e],a=!0,u=0;u<i.length;u++)r>=t&&Object.keys(o.O).every(N=>o.O[N](i[u]))?i.splice(u--,1):(a=!1,t<r&&(r=t));if(a){s.splice(e--,1);var _=h();_!==void 0&&(c=_)}}return c}})(),o.n=s=>{var c=s&&s.__esModule?()=>s.default:()=>s;return o.d(c,{a:c}),c},(()=>{var s,c=Object.getPrototypeOf?i=>Object.getPrototypeOf(i):i=>i.__proto__;o.t=function(i,h){if(1&h&&(i=this(i)),8&h||typeof i=="object"&&i&&(4&h&&i.__esModule||16&h&&typeof i.then=="function"))return i;var t=Object.create(null);o.r(t);var e={};s=s||[null,c({}),c([]),c(c)];for(var r=2&h&&i;typeof r=="object"&&!~s.indexOf(r);r=c(r))Object.getOwnPropertyNames(r).forEach(a=>e[a]=()=>i[a]);return e.default=()=>i,o.d(t,e),t}})(),o.d=(s,c)=>{for(var i in c)o.o(c,i)&&!o.o(s,i)&&Object.defineProperty(s,i,{enumerable:!0,get:c[i]})},o.e=()=>Promise.resolve(),o.g=function(){if(typeof b=="object")return b;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),o.o=(s,c)=>Object.prototype.hasOwnProperty.call(s,c),o.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},o.nmd=s=>(s.paths=[],s.children||(s.children=[]),s),(()=>{var s={5993:0};o.O.j=h=>s[h]===0;var c=(h,t)=>{var e,r,[a,u,_]=t,g=0;if(a.some(x=>s[x]!==0)){for(e in u)o.o(u,e)&&(o.m[e]=u[e]);if(_)var y=_(o)}for(h&&h(t);g<a.length;g++)r=a[g],o.o(s,r)&&s[r]&&s[r][0](),s[r]=0;return o.O(y)},i=m.webpackChunk_N_E=m.webpackChunk_N_E||[];i.forEach(c.bind(null,0)),i.push=c.bind(null,i.push.bind(i))})()})(),(m.webpackChunk_N_E=m.webpackChunk_N_E||[]).push([[5042],{93131:Ct,28789:It,50391:Kt,3326:Mt,84303:jt,7959:Tt,68610:At,26265:St,56087:Rt,52403:Nt,28024:Ot,58997:wt,8427:Et,2860:Pt,2113:vt,22738:bt,55027:$t,47398:yt,79614:kt,55612:Fe,4704:De,94051:xt,649:Ce,16254:ft}]),(m.webpackChunk_N_E=m.webpackChunk_N_E||[]).push([[5647],{12328:mt,65376:gt,1673:pt,1812:dt}]),(m.webpackChunk_N_E=m.webpackChunk_N_E||[]).push([[695],{62034:ht,41616:ct,46443:ut,92501:it,17649:ot,90552:nt,48690:at,99321:_t,25257:st,15514:rt,17949:tt,88260:et,85767:Ze,86617:Qe,68978:Ve,63412:Je,4123:ze,90074:Ye,99307:Xe,89859:We,59814:He,66765:Ge,38536:qe,35524:Ue}]),(m.webpackChunk_N_E=m.webpackChunk_N_E||[]).push([[6730],{9578:Me,26098:function(v,l,o){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});let c=s(o(9578)),i=s(o(89384));class h{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=c.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let a=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var _,g,y;let x=null,E=null,N=null,R=u.status,O=u.statusText;if(u.ok){if(this.method!=="HEAD"){let U=await u.text();U===""||(E=this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?U:JSON.parse(U))}let C=(_=this.headers.Prefer)===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),B=(g=u.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");C&&B&&B.length>1&&(N=parseInt(B[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(x={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,N=null,R=406,O="Not Acceptable"):E=E.length===1?E[0]:null)}else{let C=await u.text();try{x=JSON.parse(C),Array.isArray(x)&&u.status===404&&(E=[],x=null,R=200,O="OK")}catch{u.status===404&&C===""?(R=204,O="No Content"):x={message:C}}if(x&&this.isMaybeSingle&&((y=x?.details)===null||y===void 0?void 0:y.includes("0 rows"))&&(x=null,R=200,O="OK"),x&&this.shouldThrowOnError)throw new i.default(x)}return{error:x,data:E,count:N,status:R,statusText:O}});return this.shouldThrowOnError||(a=a.catch(u=>{var _,g,y;return{error:{message:`${(_=u?.name)!==null&&_!==void 0?_:"FetchError"}: ${u?.message}`,details:`${(g=u?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(y=u?.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,r)}}l.default=h},42074:function(v,l,o){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});let c=s(o(62485)),i=s(o(91204)),h=o(95706);class t{constructor(r,{headers:a={},schema:u,fetch:_}={}){this.url=r,this.headers=Object.assign(Object.assign({},h.DEFAULT_HEADERS),a),this.schemaName=u,this.fetch=_}from(r){let a=new URL(`${this.url}/${r}`);return new c.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new t(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,a={},{head:u=!1,get:_=!1,count:g}={}){let y,x,E=new URL(`${this.url}/rpc/${r}`);u||_?(y=u?"HEAD":"GET",Object.entries(a).filter(([R,O])=>O!==void 0).map(([R,O])=>[R,Array.isArray(O)?`{${O.join(",")}}`:`${O}`]).forEach(([R,O])=>{E.searchParams.append(R,O)})):(y="POST",x=a);let N=Object.assign({},this.headers);return g&&(N.Prefer=`count=${g}`),new i.default({method:y,url:E,headers:N,schema:this.schemaName,body:x,fetch:this.fetch,allowEmpty:!1})}}l.default=t},89384:je,91204:function(v,l,o){"use strict";var s=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});let c=s(o(98734));class i extends c.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(a=>typeof a=="string"&&RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:a}={}){let u="";a==="plain"?u="pl":a==="phrase"?u="ph":a==="websearch"&&(u="w");let _=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${u}fts${_}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}}l.default=i},62485:function(v,l,o){"use strict";var s=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});let c=s(o(91204));class i{constructor(t,{headers:e={},schema:r,fetch:a}){this.url=t,this.headers=e,this.schema=r,this.fetch=a}select(t,{head:e=!1,count:r}={}){let a=!1,u=(t??"*").split("").map(_=>/\s/.test(_)&&!a?"":(_==='"'&&(a=!a),_)).join("");return this.url.searchParams.set("select",u),r&&(this.headers.Prefer=`count=${r}`),new c.default({method:e?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:r=!0}={}){let a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),e&&a.push(`count=${e}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){let u=t.reduce((_,g)=>_.concat(Object.keys(g)),[]);if(u.length>0){let _=[...new Set(u)].map(g=>`"${g}"`);this.url.searchParams.set("columns",_.join(","))}}return new c.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:a,defaultToNull:u=!0}={}){let _=[`resolution=${r?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&_.push(this.headers.Prefer),a&&_.push(`count=${a}`),u||_.push("missing=default"),this.headers.Prefer=_.join(","),Array.isArray(t)){let g=t.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(g.length>0){let y=[...new Set(g)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new c.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),e&&r.push(`count=${e}`),this.headers.Prefer=r.join(","),new c.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e=[];return t&&e.push(`count=${t}`),this.headers.Prefer&&e.unshift(this.headers.Prefer),this.headers.Prefer=e.join(","),new c.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}l.default=i},98734:function(v,l,o){"use strict";var s=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});let c=s(o(26098));class i extends c.default{select(t){let e=!1,r=(t??"*").split("").map(a=>/\s/.test(a)&&!e?"":(a==='"'&&(e=!e),a)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:a,referencedTable:u=a}={}){let _=u?`${u}.order`:"order",g=this.url.searchParams.get(_);return this.url.searchParams.set(_,`${g?`${g},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let a=r===void 0?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:a=r}={}){let u=a===void 0?"offset":`${a}.offset`,_=a===void 0?"limit":`${a}.limit`;return this.url.searchParams.set(u,`${t}`),this.url.searchParams.set(_,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:a=!1,wal:u=!1,format:_="text"}={}){var g;let y=[t?"analyze":null,e?"verbose":null,r?"settings":null,a?"buffers":null,u?"wal":null].filter(Boolean).join("|"),x=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${_}; for="${x}"; options=${y};`,this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}l.default=i},95706:Te,82519:function(v,l,o){"use strict";var s=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0}),l.PostgrestBuilder=l.PostgrestTransformBuilder=l.PostgrestFilterBuilder=l.PostgrestQueryBuilder=l.PostgrestClient=void 0;let c=s(o(42074));l.PostgrestClient=c.default;let i=s(o(62485));l.PostgrestQueryBuilder=i.default;let h=s(o(91204));l.PostgrestFilterBuilder=h.default;let t=s(o(98734));l.PostgrestTransformBuilder=t.default;let e=s(o(26098));l.PostgrestBuilder=e.default,l.default={PostgrestClient:c.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:h.default,PostgrestTransformBuilder:t.default,PostgrestBuilder:e.default}},11496:Ae,40347:Se,53059:Be,75492:Le,54865:Re}]),(m.webpackChunk_N_E=m.webpackChunk_N_E||[]).push([[7314],{2067:Ie,26195:Ke,68936:(v,l,o)=>{"use strict";o.r(l),o.d(l,{ComponentMod:()=>C,default:()=>B});var s={};o.r(s),o.d(s,{GET:()=>g,dynamic:()=>_,runtime:()=>u});var c={};o.r(c),o.d(c,{originalPathname:()=>R,patchFetch:()=>O,requestAsyncStorage:()=>x,routeModule:()=>y,serverHooks:()=>N,staticGenerationAsyncStorage:()=>E});var i=o(88260),h=o(15514),t=o(2860),e=o(2113),r=o(75492),a=o(39868);let u="edge",_="force-dynamic";async function g(U){let M=(0,a.S)(),{data:q,error:X}=await M.rpc("active_users_last_5_min");X&&X.message.includes("rpc");let{data:I,error:n}=await M.from("page_views").select("user_id, created_at").gt("created_at",new Date(Date.now()-3e5).toISOString()),f=Object.keys((I||[]).reduce((T,j)=>(T[j.user_id]=!0,T),{})).length,{data:p}=await M.from("page_views").select("created_at, user_id").gt("created_at",new Date(Date.now()-36e5).toISOString()),d=new Map;for(let T of p||[]){let j=new Date(T.created_at);j.setSeconds(0,0);let Z=j.toISOString();d.has(Z)||d.set(Z,new Set),d.get(Z).add(T.user_id)}let K=Array.from(d.entries()).sort(([T],[j])=>T.localeCompare(j)).map(([T,j])=>({t:T,v:j.size})),w=new Date;w.setHours(0,0,0,0);let D=new Date(w.getTime()-864e5),F=new Date(w.getTime()-1),{count:S}=await M.from("leads").select("*",{count:"exact",head:!0}).gte("created_at",w.toISOString()),{count:A}=await M.from("leads").select("*",{count:"exact",head:!0}).gte("created_at",D.toISOString()).lte("created_at",F.toISOString()),L=new Date,se=L.getDay(),ce=L.getDate()-se+(se===0?-6:1);L.setDate(ce),L.setHours(0,0,0,0);let{count:ae}=await M.from("builder_subscriptions").select("*",{count:"exact",head:!0}).neq("tier","trial").gte("updated_at",L.toISOString()),{count:V}=await M.from("builder_subscriptions").select("*",{count:"exact",head:!0}).eq("tier","trial").gte("updated_at",L.toISOString()),H=new Date,he=new Date(H.getFullYear(),H.getMonth(),1),le=new Date(H.getFullYear(),H.getMonth()-1,1),_e=new Date(H.getFullYear(),H.getMonth(),0,23,59,59,999),{data:de}=await M.from("payments").select("amount, created_at").gte("created_at",he.toISOString()),ne=(de||[]).reduce((T,j)=>T+Number(j.amount||0),0),{data:pe}=await M.from("payments").select("amount, created_at").gte("created_at",le.toISOString()).lte("created_at",_e.toISOString()),Q=(pe||[]).reduce((T,j)=>T+Number(j.amount||0),0);return r.xk.json({activeUsersNow:{value:f,series:K},leadsToday:{value:S||0,pctVsYesterday:S&&A&&A>0?(S-A)/A:0},trialConversionsWeek:{value:ae||0,conversionRate:V&&V>0?(ae||0)/V:0},revenueMtd:{value:ne,growthVsLastMonth:Q>0?(ne-Q)/Q:0}})}let y=new h.AppRouteRouteModule({definition:{kind:t.x.APP_ROUTE,page:"/api/admin/metrics/top/route",pathname:"/api/admin/metrics/top",filename:"route",bundlePath:"app/api/admin/metrics/top/route"},resolvedPagePath:"/workspace/app/app/api/admin/metrics/top/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:x,staticGenerationAsyncStorage:E,serverHooks:N}=y,R="/api/admin/metrics/top/route";function O(){return(0,e.XH)({serverHooks:N,staticGenerationAsyncStorage:E})}let C=c,B=i.a.wrap(y)},39868:Ne},v=>{var l=s=>v(v.s=s);v.O(0,[5042,5647,695,6730],()=>l(68936));var o=v.O();(b._ENTRIES=typeof b._ENTRIES>"u"?{}:b._ENTRIES)["middleware_app/api/admin/metrics/top/route"]=o}]),function(){let v={exports:{},loaded:!1};return function(o,s){var c=Object.create,i=Object.defineProperty,h=Object.getOwnPropertyDescriptor,t=Object.getOwnPropertyNames,e=Object.getPrototypeOf,r=Object.prototype.hasOwnProperty,a=n=>i(n,"__esModule",{value:!0}),u=(n,f)=>{a(n);for(var p in f)i(n,p,{get:f[p],enumerable:!0})},_=(n,f,p)=>{if(f&&typeof f=="object"||typeof f=="function")for(let d of t(f))!r.call(n,d)&&d!=="default"&&i(n,d,{get:()=>f[d],enumerable:!(p=h(f,d))||p.enumerable});return n},g=n=>_(a(i(n!=null?c(e(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);u(s,{default:()=>M});var y=g((ie(),ke(Y))),x="@next/request-context",E=Symbol.for(x),N=Symbol.for("internal.storage");function R(){let n=b;if(!n[E]){let f=new y.AsyncLocalStorage,p={get:()=>f.getStore(),[N]:f};n[E]=p}return n[E]}var O=R();function C(n,f){return O[N].run(n,f)}function B(n){let f={};return n&&n.forEach((p,d)=>{f[d]=p,d.toLowerCase()==="set-cookie"&&(f[d]=U(p))}),f}function U(n){let f=[],p=0,d,K,w,D,F;function S(){for(;p<n.length&&/\s/.test(n.charAt(p));)p+=1;return p<n.length}function A(){return K=n.charAt(p),K!=="="&&K!==";"&&K!==","}for(;p<n.length;){for(d=p,F=!1;S();)if(K=n.charAt(p),K===","){for(w=p,p+=1,S(),D=p;p<n.length&&A();)p+=1;p<n.length&&n.charAt(p)==="="?(F=!0,p=D,f.push(n.substring(d,w)),d=p):p=w+1}else p+=1;(!F||p>=n.length)&&f.push(n.substring(d,n.length))}return f}function M(n){let f=n.staticRoutes.map(d=>({regexp:new RegExp(d.namedRegex),page:d.page})),p=n.dynamicRoutes?.map(d=>({regexp:new RegExp(d.namedRegex),page:d.page}))||[];return async function(d,K){let w=new URL(d.url).pathname,D={};if(n.nextConfig?.basePath&&w.startsWith(n.nextConfig.basePath)&&(w=w.replace(n.nextConfig.basePath,"")||"/"),n.nextConfig?.i18n)for(let S of n.nextConfig.i18n.locales){let A=new RegExp(`^/${S}($|/)`,"i");if(w.match(A)){w=w.replace(A,"/")||"/";break}}for(let S of f)if(S.regexp.exec(w)){D.name=S.page;break}if(!D.name){let S=X(w);for(let A of p||[]){if(S&&!X(A.page))continue;let L=A.regexp.exec(w);if(L){D={name:A.page,params:L.groups};break}}}let F=await C({waitUntil:K.waitUntil},()=>b._ENTRIES[`middleware_${n.name}`].default.call({},{request:{url:d.url,method:d.method,headers:B(d.headers),ip:q(d.headers,I.Ip),geo:{city:q(d.headers,I.City,!0),country:q(d.headers,I.Country,!0),latitude:q(d.headers,I.Latitude),longitude:q(d.headers,I.Longitude),region:q(d.headers,I.Region,!0)},nextConfig:n.nextConfig,page:D,body:d.body}}));return F.waitUntil&&K.waitUntil(F.waitUntil),F.response}}function q(n,f,p=!1){let d=n.get(f)||void 0;return p&&d?decodeURIComponent(d):d}function X(n){return n==="/api"||n.startsWith("/api/")}var I;(function(n){n.City="x-vercel-ip-city",n.Country="x-vercel-ip-country",n.Ip="x-real-ip",n.Latitude="x-vercel-ip-latitude",n.Longitude="x-vercel-ip-longitude",n.Region="x-vercel-ip-country-region"})(I||(I={}))}(v,v.exports),v.exports}.call({}).default({name:"app/api/admin/metrics/top/route",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/admin",regex:"^/admin(?:/)?$",routeKeys:{},namedRegex:"^/admin(?:/)?$"},{page:"/admin/leads",regex:"^/admin/leads(?:/)?$",routeKeys:{},namedRegex:"^/admin/leads(?:/)?$"},{page:"/admin/settings",regex:"^/admin/settings(?:/)?$",routeKeys:{},namedRegex:"^/admin/settings(?:/)?$"},{page:"/admin/verify",regex:"^/admin/verify(?:/)?$",routeKeys:{},namedRegex:"^/admin/verify(?:/)?$"},{page:"/app",regex:"^/app(?:/)?$",routeKeys:{},namedRegex:"^/app(?:/)?$"},{page:"/app/saas",regex:"^/app/saas(?:/)?$",routeKeys:{},namedRegex:"^/app/saas(?:/)?$"},{page:"/app/saas/dashboard",regex:"^/app/saas/dashboard(?:/)?$",routeKeys:{},namedRegex:"^/app/saas/dashboard(?:/)?$"},{page:"/app/saas/pricing",regex:"^/app/saas/pricing(?:/)?$",routeKeys:{},namedRegex:"^/app/saas/pricing(?:/)?$"},{page:"/builder",regex:"^/builder(?:/)?$",routeKeys:{},namedRegex:"^/builder(?:/)?$"},{page:"/builder/leads",regex:"^/builder/leads(?:/)?$",routeKeys:{},namedRegex:"^/builder/leads(?:/)?$"},{page:"/builder/leads/pipeline",regex:"^/builder/leads/pipeline(?:/)?$",routeKeys:{},namedRegex:"^/builder/leads/pipeline(?:/)?$"},{page:"/builders/add-property",regex:"^/builders/add\\-property(?:/)?$",routeKeys:{},namedRegex:"^/builders/add\\-property(?:/)?$"},{page:"/dashboard/map",regex:"^/dashboard/map(?:/)?$",routeKeys:{},namedRegex:"^/dashboard/map(?:/)?$"},{page:"/dashboard/market",regex:"^/dashboard/market(?:/)?$",routeKeys:{},namedRegex:"^/dashboard/market(?:/)?$"},{page:"/embed/how-it-works",regex:"^/embed/how\\-it\\-works(?:/)?$",routeKeys:{},namedRegex:"^/embed/how\\-it\\-works(?:/)?$"},{page:"/filters/radial",regex:"^/filters/radial(?:/)?$",routeKeys:{},namedRegex:"^/filters/radial(?:/)?$"},{page:"/login",regex:"^/login(?:/)?$",routeKeys:{},namedRegex:"^/login(?:/)?$"},{page:"/saas",regex:"^/saas(?:/)?$",routeKeys:{},namedRegex:"^/saas(?:/)?$"},{page:"/saas/analytics",regex:"^/saas/analytics(?:/)?$",routeKeys:{},namedRegex:"^/saas/analytics(?:/)?$"},{page:"/saas/dashboard",regex:"^/saas/dashboard(?:/)?$",routeKeys:{},namedRegex:"^/saas/dashboard(?:/)?$"},{page:"/saas/pricing",regex:"^/saas/pricing(?:/)?$",routeKeys:{},namedRegex:"^/saas/pricing(?:/)?$"},{page:"/saas/workflows",regex:"^/saas/workflows(?:/)?$",routeKeys:{},namedRegex:"^/saas/workflows(?:/)?$"},{page:"/saved",regex:"^/saved(?:/)?$",routeKeys:{},namedRegex:"^/saved(?:/)?$"},{page:"/sitemap.xml",regex:"^/sitemap\\.xml(?:/)?$",routeKeys:{},namedRegex:"^/sitemap\\.xml(?:/)?$"},{page:"/tools/cost-calculator",regex:"^/tools/cost\\-calculator(?:/)?$",routeKeys:{},namedRegex:"^/tools/cost\\-calculator(?:/)?$"},{page:"/tools/currency-risk",regex:"^/tools/currency\\-risk(?:/)?$",routeKeys:{},namedRegex:"^/tools/currency\\-risk(?:/)?$"},{page:"/tools/environment",regex:"^/tools/environment(?:/)?$",routeKeys:{},namedRegex:"^/tools/environment(?:/)?$"},{page:"/tools/remote-management",regex:"^/tools/remote\\-management(?:/)?$",routeKeys:{},namedRegex:"^/tools/remote\\-management(?:/)?$"},{page:"/tools/roi",regex:"^/tools/roi(?:/)?$",routeKeys:{},namedRegex:"^/tools/roi(?:/)?$"},{page:"/tools/vastu",regex:"^/tools/vastu(?:/)?$",routeKeys:{},namedRegex:"^/tools/vastu(?:/)?$"},{page:"/tools/verification",regex:"^/tools/verification(?:/)?$",routeKeys:{},namedRegex:"^/tools/verification(?:/)?$"},{page:"/tools/voice-tamil",regex:"^/tools/voice\\-tamil(?:/)?$",routeKeys:{},namedRegex:"^/tools/voice\\-tamil(?:/)?$"},{page:"/tours",regex:"^/tours(?:/)?$",routeKeys:{},namedRegex:"^/tours(?:/)?$"},{page:"/tours/ar-staging",regex:"^/tours/ar\\-staging(?:/)?$",routeKeys:{},namedRegex:"^/tours/ar\\-staging(?:/)?$"},{page:"/tours/hotspots",regex:"^/tours/hotspots(?:/)?$",routeKeys:{},namedRegex:"^/tours/hotspots(?:/)?$"},{page:"/unauthorized",regex:"^/unauthorized(?:/)?$",routeKeys:{},namedRegex:"^/unauthorized(?:/)?$"}],dynamicRoutes:[{page:"/api/builder/leads/[id]",regex:"^/api/builder/leads/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/builder/leads/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/builder/leads/[id]",regex:"^/builder/leads/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/builder/leads/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/microsite/[id]",regex:"^/microsite/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/microsite/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/[locale]",regex:"^/([^/]+?)(?:/)?$",routeKeys:{nxtPlocale:"nxtPlocale"},namedRegex:"^/(?<nxtPlocale>[^/]+?)(?:/)?$"}],nextConfig:{basePath:""}})))(k,k,k);export{Vt as default};
