var x={},B=(z,L,X)=>(x.__chunk_33157=(Q,w,u)=>{"use strict";u.d(w,{m:()=>p});var o=u(56087);let m=(0,o.D)(String.raw`/workspace/app/components/providers/ReactQueryProvider.tsx`),{__esModule:d,$$typeof:r}=m;m.default;let p=(0,o.D)(String.raw`/workspace/app/components/providers/ReactQueryProvider.tsx#ReactQueryProvider`)},x.__chunk_36213=(Q,w,u)=>{"use strict";u.d(w,{ReactQueryProvider:()=>p});var o=u(5486),m=u(32428),d=u(43784),r=u(24708);function p({children:v}){let[q]=(0,m.useState)(()=>new d.S({defaultOptions:{queries:{staleTime:3e4,refetchOnWindowFocus:!1,retry:1}}}));return(0,o.jsx)(r.aH,{client:q,children:v})}},x.__chunk_24708=(Q,w,u)=>{u.d(w,{NL:()=>r,aH:()=>p});var o=u(32428),m=u(5486),d=o.createContext(void 0),r=v=>{let q=o.useContext(d);if(v)return v;if(!q)throw Error("No QueryClient set, use QueryClientProvider to set one");return q},p=({client:v,children:q})=>(o.useEffect(()=>(v.mount(),()=>{v.unmount()}),[v]),(0,m.jsx)(d.Provider,{value:v,children:q}))},x.__chunk_82753=(Q,w,u)=>{u.d(w,{CN:()=>E,Ht:()=>_,KC:()=>q,Kp:()=>v,L3:()=>j,Nc:()=>a,PN:()=>p,Rm:()=>O,SE:()=>r,VS:()=>k,VX:()=>y,X7:()=>c,Ym:()=>A,ZT:()=>d,_v:()=>l,_x:()=>n,cG:()=>D,oE:()=>F,sk:()=>m,to:()=>S});var o=u(51756),m=typeof window>"u"||"Deno"in L;function d(){}function r(s,h){return typeof s=="function"?s(h):s}function p(s){return typeof s=="number"&&s>=0&&s!==1/0}function v(s,h){return Math.max(s+(h||0)-Date.now(),0)}function q(s,h){return typeof s=="function"?s(h):s}function a(s,h){return typeof s=="function"?s(h):s}function n(s,h){let{type:g="all",exact:C,fetchStatus:b,predicate:P,queryKey:T,stale:M}=s;if(T){if(C){if(h.queryHash!==O(T,h.options))return!1}else if(!S(h.queryKey,T))return!1}if(g!=="all"){let K=h.isActive();if(g==="active"&&!K||g==="inactive"&&K)return!1}return(typeof M!="boolean"||h.isStale()===M)&&(!b||b===h.state.fetchStatus)&&(!P||!!P(h))}function c(s,h){let{exact:g,status:C,predicate:b,mutationKey:P}=s;if(P){if(!h.options.mutationKey)return!1;if(g){if(A(h.options.mutationKey)!==A(P))return!1}else if(!S(h.options.mutationKey,P))return!1}return(!C||h.state.status===C)&&(!b||!!b(h))}function O(s,h){return(h?.queryKeyHashFn||A)(s)}function A(s){return JSON.stringify(s,(h,g)=>e(g)?Object.keys(g).sort().reduce((C,b)=>(C[b]=g[b],C),{}):g)}function S(s,h){return s===h||typeof s==typeof h&&!!s&&!!h&&typeof s=="object"&&typeof h=="object"&&Object.keys(h).every(g=>S(s[g],h[g]))}var f=Object.prototype.hasOwnProperty;function k(s,h){if(!h||Object.keys(s).length!==Object.keys(h).length)return!1;for(let g in s)if(s[g]!==h[g])return!1;return!0}function t(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function e(s){if(!i(s))return!1;let h=s.constructor;if(h===void 0)return!0;let g=h.prototype;return!!(i(g)&&g.hasOwnProperty("isPrototypeOf"))&&Object.getPrototypeOf(s)===Object.prototype}function i(s){return Object.prototype.toString.call(s)==="[object Object]"}function l(s){return new Promise(h=>{o.mr.setTimeout(h,s)})}function F(s,h,g){return typeof g.structuralSharing=="function"?g.structuralSharing(s,h):g.structuralSharing!==!1?function C(b,P){if(b===P)return b;let T=t(b)&&t(P);if(!T&&!(e(b)&&e(P)))return P;let M=(T?b:Object.keys(b)).length,K=T?P:Object.keys(P),R=K.length,U=T?Array(R):{},H=0;for(let V=0;V<R;V++){let I=T?V:K[V],N=b[I],G=P[I];if(N===G){U[I]=N,(T?V<M:f.call(b,I))&&H++;continue}if(N===null||G===null||typeof N!="object"||typeof G!="object"){U[I]=G;continue}let Z=C(N,G);U[I]=Z,Z===N&&H++}return M===R&&H===M?b:U}(s,h):h}function y(s,h,g=0){let C=[...s,h];return g&&C.length>g?C.slice(1):C}function _(s,h,g=0){let C=[h,...s];return g&&C.length>g?C.slice(0,-1):C}var E=Symbol();function D(s,h){return!s.queryFn&&h?.initialPromise?()=>h.initialPromise:s.queryFn&&s.queryFn!==E?s.queryFn:()=>Promise.reject(Error(`Missing queryFn: '${s.queryHash}'`))}function j(s,h){return typeof s=="function"?s(...h):!!s}},x.__chunk_51756=(Q,w,u)=>{u.d(w,{Hp:()=>d,mr:()=>m});var o={setTimeout:(r,p)=>setTimeout(r,p),clearTimeout:r=>clearTimeout(r),setInterval:(r,p)=>setInterval(r,p),clearInterval:r=>clearInterval(r)},m=new class{#t=o;#e=!1;setTimeoutProvider(r){this.#t=r}setTimeout(r,p){return this.#t.setTimeout(r,p)}clearTimeout(r){this.#t.clearTimeout(r)}setInterval(r,p){return this.#t.setInterval(r,p)}clearInterval(r){this.#t.clearInterval(r)}};function d(r){setTimeout(r,0)}},x.__chunk_92566=(Q,w,u)=>{function o(){let m,d,r=new Promise((v,q)=>{m=v,d=q});function p(v){Object.assign(r,v),delete r.resolve,delete r.reject}return r.status="pending",r.catch(()=>{}),r.resolve=v=>{p({status:"fulfilled",value:v}),m(v)},r.reject=v=>{p({status:"rejected",reason:v}),d(v)},r}u.d(w,{O:()=>o})},x.__chunk_9345=(Q,w,u)=>{u.d(w,{l:()=>o});var o=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(m){return this.listeners.add(m),this.onSubscribe(),()=>{this.listeners.delete(m),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}},x.__chunk_29211=(Q,w,u)=>{u.d(w,{Kw:()=>v,Mz:()=>a,p8:()=>q});var o=u(51923),m=u(72659),d=u(92566),r=u(82753);function p(n){return Math.min(1e3*2**n,3e4)}function v(n){return(n??"online")!=="online"||m.N.isOnline()}var q=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function a(n){let c,O=!1,A=0,S=(0,d.O)(),f=()=>S.status!=="pending",k=()=>o.j.isFocused()&&(n.networkMode==="always"||m.N.isOnline())&&n.canRun(),t=()=>v(n.networkMode)&&n.canRun(),e=y=>{f()||(c?.(),S.resolve(y))},i=y=>{f()||(c?.(),S.reject(y))},l=()=>new Promise(y=>{c=_=>{(f()||k())&&y(_)},n.onPause?.()}).then(()=>{c=void 0,f()||n.onContinue?.()}),F=()=>{let y;if(f())return;let _=A===0?n.initialPromise:void 0;try{y=_??n.fn()}catch(E){y=Promise.reject(E)}Promise.resolve(y).then(e).catch(E=>{if(f())return;let D=n.retry??(r.sk?0:3),j=n.retryDelay??p,s=typeof j=="function"?j(A,E):j,h=D===!0||typeof D=="number"&&A<D||typeof D=="function"&&D(A,E);if(O||!h){i(E);return}A++,n.onFail?.(A,E),(0,r._v)(s).then(()=>k()?void 0:l()).then(()=>{O?i(E):F()})})};return{promise:S,status:()=>S.status,cancel:y=>{if(!f()){let _=new q(y);i(_),n.onCancel?.(_)}},continue:()=>(c?.(),S),cancelRetry:()=>{O=!0},continueRetry:()=>{O=!1},canStart:t,start:()=>(t()?F():l().then(F),S)}}},x.__chunk_13175=(Q,w,u)=>{u.d(w,{F:()=>d});var o=u(51756),m=u(82753),d=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,m.PN)(this.gcTime)&&(this.#t=o.mr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(m.sk?1/0:3e5))}clearGcTimeout(){this.#t&&(o.mr.clearTimeout(this.#t),this.#t=void 0)}}},x.__chunk_43784=(Q,w,u)=>{u.d(w,{S:()=>k});var o=u(82753),m=u(71487),d=u(81878),r=u(9345),p=class extends r.l{constructor(t={}){super(),this.config=t,this.#t=new Map}#t;build(t,e,i){let l=e.queryKey,F=e.queryHash??(0,o.Rm)(l,e),y=this.get(F);return y||(y=new m.A({client:t,queryKey:l,queryHash:F,options:t.defaultQueryOptions(e),state:i,defaultOptions:t.getQueryDefaults(l)}),this.add(y)),y}add(t){this.#t.has(t.queryHash)||(this.#t.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){let e=this.#t.get(t.queryHash);e&&(t.destroy(),e===t&&this.#t.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){d.Vr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#t.get(t)}getAll(){return[...this.#t.values()]}find(t){let e={exact:!0,...t};return this.getAll().find(i=>(0,o._x)(e,i))}findAll(t={}){let e=this.getAll();return Object.keys(t).length>0?e.filter(i=>(0,o._x)(t,i)):e}notify(t){d.Vr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){d.Vr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){d.Vr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},v=u(13175),q=u(29211),a=class extends v.F{#t;#e;#i;#r;constructor(t){super(),this.#t=t.client,this.mutationId=t.mutationId,this.#i=t.mutationCache,this.#e=[],this.state=t.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#i.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#i.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#i.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){let e=()=>{this.#s({type:"continue"})},i={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=(0,q.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(t,i):Promise.reject(Error("No mutationFn found")),onFail:(y,_)=>{this.#s({type:"failed",failureCount:y,error:_})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#i.canRun(this)});let l=this.state.status==="pending",F=!this.#r.canStart();try{if(l)e();else{this.#s({type:"pending",variables:t,isPaused:F}),await this.#i.config.onMutate?.(t,this,i);let _=await this.options.onMutate?.(t,i);_!==this.state.context&&this.#s({type:"pending",context:_,variables:t,isPaused:F})}let y=await this.#r.start();return await this.#i.config.onSuccess?.(y,t,this.state.context,this,i),await this.options.onSuccess?.(y,t,this.state.context,i),await this.#i.config.onSettled?.(y,null,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(y,null,t,this.state.context,i),this.#s({type:"success",data:y}),y}catch(y){try{throw await this.#i.config.onError?.(y,t,this.state.context,this,i),await this.options.onError?.(y,t,this.state.context,i),await this.#i.config.onSettled?.(void 0,y,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(void 0,y,t,this.state.context,i),y}finally{this.#s({type:"error",error:y})}}finally{this.#i.runNext(this)}}#s(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),d.Vr.batch(()=>{this.#e.forEach(e=>{e.onMutationUpdate(t)}),this.#i.notify({mutation:this,type:"updated",action:t})})}},n=class extends r.l{constructor(t={}){super(),this.config=t,this.#t=new Set,this.#e=new Map,this.#i=0}#t;#e;#i;build(t,e,i){let l=new a({client:t,mutationCache:this,mutationId:++this.#i,options:t.defaultMutationOptions(e),state:i});return this.add(l),l}add(t){this.#t.add(t);let e=c(t);if(typeof e=="string"){let i=this.#e.get(e);i?i.push(t):this.#e.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#t.delete(t)){let e=c(t);if(typeof e=="string"){let i=this.#e.get(e);if(i)if(i.length>1){let l=i.indexOf(t);l!==-1&&i.splice(l,1)}else i[0]===t&&this.#e.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){let e=c(t);if(typeof e!="string")return!0;{let i=this.#e.get(e),l=i?.find(F=>F.state.status==="pending");return!l||l===t}}runNext(t){let e=c(t);return typeof e!="string"?Promise.resolve():this.#e.get(e)?.find(l=>l!==t&&l.state.isPaused)?.continue()??Promise.resolve()}clear(){d.Vr.batch(()=>{this.#t.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(t){let e={exact:!0,...t};return this.getAll().find(i=>(0,o.X7)(e,i))}findAll(t={}){return this.getAll().filter(e=>(0,o.X7)(t,e))}notify(t){d.Vr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){let t=this.getAll().filter(e=>e.state.isPaused);return d.Vr.batch(()=>Promise.all(t.map(e=>e.continue().catch(o.ZT))))}};function c(t){return t.options.scope?.id}var O=u(51923),A=u(72659);function S(t){return{onFetch:(e,i)=>{let l=e.options,F=e.fetchOptions?.meta?.fetchMore?.direction,y=e.state.data?.pages||[],_=e.state.data?.pageParams||[],E={pages:[],pageParams:[]},D=0,j=async()=>{let s=!1,h=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?s=!0:e.signal.addEventListener("abort",()=>{s=!0}),e.signal)})},g=(0,o.cG)(e.options,e.fetchOptions),C=async(b,P,T)=>{if(s)return Promise.reject();if(P==null&&b.pages.length)return Promise.resolve(b);let M=(()=>{let H={client:e.client,queryKey:e.queryKey,pageParam:P,direction:T?"backward":"forward",meta:e.options.meta};return h(H),H})(),K=await g(M),{maxPages:R}=e.options,U=T?o.Ht:o.VX;return{pages:U(b.pages,K,R),pageParams:U(b.pageParams,P,R)}};if(F&&y.length){let b=F==="backward",P={pages:y,pageParams:_},T=(b?function(M,{pages:K,pageParams:R}){return K.length>0?M.getPreviousPageParam?.(K[0],K,R[0],R):void 0}:f)(l,P);E=await C(P,T,b)}else{let b=t??y.length;do{let P=D===0?_[0]??l.initialPageParam:f(l,E);if(D>0&&P==null)break;E=await C(E,P),D++}while(D<b)}return E};e.options.persister?e.fetchFn=()=>e.options.persister?.(j,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},i):e.fetchFn=j}}}function f(t,{pages:e,pageParams:i}){let l=e.length-1;return e.length>0?t.getNextPageParam(e[l],e,i[l],i):void 0}var k=class{#t;#e;#i;#r;#s;#a;#o;#n;constructor(t={}){this.#t=t.queryCache||new p,this.#e=t.mutationCache||new n,this.#i=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=O.j.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#n=A.N.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#n?.(),this.#n=void 0)}isFetching(t){return this.#t.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#e.findAll({...t,status:"pending"}).length}getQueryData(t){let e=this.defaultQueryOptions({queryKey:t});return this.#t.get(e.queryHash)?.state.data}ensureQueryData(t){let e=this.defaultQueryOptions(t),i=this.#t.build(this,e),l=i.state.data;return l===void 0?this.fetchQuery(t):(t.revalidateIfStale&&i.isStaleByTime((0,o.KC)(e.staleTime,i))&&this.prefetchQuery(e),Promise.resolve(l))}getQueriesData(t){return this.#t.findAll(t).map(({queryKey:e,state:i})=>[e,i.data])}setQueryData(t,e,i){let l=this.defaultQueryOptions({queryKey:t}),F=this.#t.get(l.queryHash),y=F?.state.data,_=(0,o.SE)(e,y);if(_!==void 0)return this.#t.build(this,l).setData(_,{...i,manual:!0})}setQueriesData(t,e,i){return d.Vr.batch(()=>this.#t.findAll(t).map(({queryKey:l})=>[l,this.setQueryData(l,e,i)]))}getQueryState(t){let e=this.defaultQueryOptions({queryKey:t});return this.#t.get(e.queryHash)?.state}removeQueries(t){let e=this.#t;d.Vr.batch(()=>{e.findAll(t).forEach(i=>{e.remove(i)})})}resetQueries(t,e){let i=this.#t;return d.Vr.batch(()=>(i.findAll(t).forEach(l=>{l.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){let i={revert:!0,...e};return Promise.all(d.Vr.batch(()=>this.#t.findAll(t).map(l=>l.cancel(i)))).then(o.ZT).catch(o.ZT)}invalidateQueries(t,e={}){return d.Vr.batch(()=>(this.#t.findAll(t).forEach(i=>{i.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){let i={...e,cancelRefetch:e.cancelRefetch??!0};return Promise.all(d.Vr.batch(()=>this.#t.findAll(t).filter(l=>!l.isDisabled()&&!l.isStatic()).map(l=>{let F=l.fetch(void 0,i);return i.throwOnError||(F=F.catch(o.ZT)),l.state.fetchStatus==="paused"?Promise.resolve():F}))).then(o.ZT)}fetchQuery(t){let e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);let i=this.#t.build(this,e);return i.isStaleByTime((0,o.KC)(e.staleTime,i))?i.fetch(e):Promise.resolve(i.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(o.ZT).catch(o.ZT)}fetchInfiniteQuery(t){return t.behavior=S(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(o.ZT).catch(o.ZT)}ensureInfiniteQueryData(t){return t.behavior=S(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return A.N.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#i}setDefaultOptions(t){this.#i=t}setQueryDefaults(t,e){this.#r.set((0,o.Ym)(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){let e=[...this.#r.values()],i={};return e.forEach(l=>{(0,o.to)(t,l.queryKey)&&Object.assign(i,l.defaultOptions)}),i}setMutationDefaults(t,e){this.#s.set((0,o.Ym)(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){let e=[...this.#s.values()],i={};return e.forEach(l=>{(0,o.to)(t,l.mutationKey)&&Object.assign(i,l.defaultOptions)}),i}defaultQueryOptions(t){if(t._defaulted)return t;let e={...this.#i.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=(0,o.Rm)(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===o.CN&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#i.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}}},x.__chunk_71487=(Q,w,u)=>{u.d(w,{A:()=>p,z:()=>v});var o=u(82753),m=u(81878),d=u(29211),r=u(13175),p=class extends r.F{#t;#e;#i;#r;#s;#a;#o;constructor(a){super(),this.#o=!1,this.#a=a.defaultOptions,this.setOptions(a.options),this.observers=[],this.#r=a.client,this.#i=this.#r.getQueryCache(),this.queryKey=a.queryKey,this.queryHash=a.queryHash,this.#t=q(this.options),this.state=a.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(a){if(this.options={...this.#a,...a},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){let n=q(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),this.#t=n)}}optionalRemove(){this.observers.length||this.state.fetchStatus!=="idle"||this.#i.remove(this)}setData(a,n){let c=(0,o.oE)(this.state.data,a,this.options);return this.#n({data:c,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),c}setState(a,n){this.#n({type:"setState",state:a,setStateOptions:n})}cancel(a){let n=this.#s?.promise;return this.#s?.cancel(a),n?n.then(o.ZT).catch(o.ZT):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(a=>(0,o.Nc)(a.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===o.CN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(a=>(0,o.KC)(a.options.staleTime,this)==="static")}isStale(){return this.getObserversCount()>0?this.observers.some(a=>a.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(a=0){return this.state.data===void 0||a!=="static"&&(!!this.state.isInvalidated||!(0,o.Kp)(this.state.dataUpdatedAt,a))}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(a){this.observers.includes(a)||(this.observers.push(a),this.clearGcTimeout(),this.#i.notify({type:"observerAdded",query:this,observer:a}))}removeObserver(a){this.observers.includes(a)&&(this.observers=this.observers.filter(n=>n!==a),this.observers.length||(this.#s&&(this.#o?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#i.notify({type:"observerRemoved",query:this,observer:a}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}async fetch(a,n){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(a&&this.setOptions(a),!this.options.queryFn){let f=this.observers.find(k=>k.options.queryFn);f&&this.setOptions(f.options)}let c=new AbortController,O=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(this.#o=!0,c.signal)})},A=()=>{let f=(0,o.cG)(this.options,n),k=(()=>{let t={client:this.#r,queryKey:this.queryKey,meta:this.meta};return O(t),t})();return this.#o=!1,this.options.persister?this.options.persister(f,k,this):f(k)},S=(()=>{let f={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:A};return O(f),f})();this.options.behavior?.onFetch(S,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==S.fetchOptions?.meta)&&this.#n({type:"fetch",meta:S.fetchOptions?.meta}),this.#s=(0,d.Mz)({initialPromise:n?.initialPromise,fn:S.fetchFn,onCancel:f=>{f instanceof d.p8&&f.revert&&this.setState({...this.#e,fetchStatus:"idle"}),c.abort()},onFail:(f,k)=>{this.#n({type:"failed",failureCount:f,error:k})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:S.options.retry,retryDelay:S.options.retryDelay,networkMode:S.options.networkMode,canRun:()=>!0});try{let f=await this.#s.start();if(f===void 0)throw Error(`${this.queryHash} data is undefined`);return this.setData(f),this.#i.config.onSuccess?.(f,this),this.#i.config.onSettled?.(f,this.state.error,this),f}catch(f){if(f instanceof d.p8){if(f.silent)return this.#s.promise;if(f.revert){if(this.state.data===void 0)throw f;return this.state.data}}throw this.#n({type:"error",error:f}),this.#i.config.onError?.(f,this),this.#i.config.onSettled?.(this.state.data,f,this),f}finally{this.scheduleGc()}}#n(a){this.state=(n=>{switch(a.type){case"failed":return{...n,fetchFailureCount:a.failureCount,fetchFailureReason:a.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...v(n.data,this.options),fetchMeta:a.meta??null};case"success":let c={...n,data:a.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:a.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!a.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#e=a.manual?c:void 0,c;case"error":let O=a.error;return{...n,error:O,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:O,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...a.state}}})(this.state),m.Vr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#i.notify({query:this,type:"updated",action:a})})}};function v(a,n){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:(0,d.Kw)(n.networkMode)?"fetching":"paused",...a===void 0&&{error:null,status:"pending"}}}function q(a){let n=typeof a.initialData=="function"?a.initialData():a.initialData,c=n!==void 0,O=c?typeof a.initialDataUpdatedAt=="function"?a.initialDataUpdatedAt():a.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:c?O??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:c?"success":"pending",fetchStatus:"idle"}}},x.__chunk_72659=(Q,w,u)=>{u.d(w,{N:()=>d});var o=u(9345),m=u(82753),d=new class extends o.l{#t=!0;#e;#i;constructor(){super(),this.#i=r=>{if(!m.sk&&window.addEventListener){let p=()=>r(!0),v=()=>r(!1);return window.addEventListener("online",p,!1),window.addEventListener("offline",v,!1),()=>{window.removeEventListener("online",p),window.removeEventListener("offline",v)}}}}onSubscribe(){this.#e||this.setEventListener(this.#i)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(r){this.#i=r,this.#e?.(),this.#e=r(this.setOnline.bind(this))}setOnline(r){this.#t!==r&&(this.#t=r,this.listeners.forEach(p=>{p(r)}))}isOnline(){return this.#t}}},x.__chunk_81878=(Q,w,u)=>{u.d(w,{Vr:()=>m});var o=u(51756).Hp,m=function(){let d=[],r=0,p=c=>{c()},v=c=>{c()},q=o,a=c=>{r?d.push(c):q(()=>{p(c)})},n=()=>{let c=d;d=[],c.length&&q(()=>{v(()=>{c.forEach(O=>{p(O)})})})};return{batch:c=>{let O;r++;try{O=c()}finally{--r||n()}return O},batchCalls:c=>(...O)=>{a(()=>{c(...O)})},schedule:a,setNotifyFunction:c=>{p=c},setBatchNotifyFunction:c=>{v=c},setScheduler:c=>{q=c}}}()},x.__chunk_51923=(Q,w,u)=>{u.d(w,{j:()=>d});var o=u(9345),m=u(82753),d=new class extends o.l{#t;#e;#i;constructor(){super(),this.#i=r=>{if(!m.sk&&window.addEventListener){let p=()=>r();return window.addEventListener("visibilitychange",p,!1),()=>{window.removeEventListener("visibilitychange",p)}}}}onSubscribe(){this.#e||this.setEventListener(this.#i)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(r){this.#i=r,this.#e?.(),this.#e=r(p=>{typeof p=="boolean"?this.setFocused(p):this.onFocus()})}setFocused(r){this.#t!==r&&(this.#t=r,this.onFocus())}onFocus(){let r=this.isFocused();this.listeners.forEach(p=>{p(r)})}isFocused(){return typeof this.#t=="boolean"?this.#t:L.document?.visibilityState!=="hidden"}}},x);export{B as __getNamedExports};
